<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../static/css/areamaplp.css">
  <title>AreaMap｜行動につながるアクセスマップ</title>
</head>

<body data-active-section="hero">

<!-- =========================
  Global Wrapper
========================= -->
<div id="lp-root">

  <!-- =========================
    Hero / First View
  ========================= -->
  <section class="lp-section lp-hero" data-section="hero">

    <div class="lp-bg lp-bg-neutral"></div>

    <div class="lp-content">
      <h1 class="lp-title">
        その地図、<br>
        「置いただけ」で終わっていませんか？
      </h1>

      <p class="lp-lead">
        見られる → 押される → 来てもらう<br>
        行動につながるアクセスマップ
      </p>
    </div>

    <!-- Central Map (Fixed / Sticky想定) -->
    <div class="lp-map-stage">
      <div class="lp-areamap">
        <!-- AreaMap embed / iframe / div -->
        <div class="areamap-placeholder">
          AreaMap
        </div>
      </div>
    </div>

  </section>

  <!-- =========================
    Section: Website
  ========================= -->
  <section class="lp-section lp-website" data-section="website">

    <div class="lp-bg lp-bg-website"></div>

    <div class="lp-content">
      <h2 class="lp-heading">
        ホームページでは<br>
        「ちゃんと場所が分かる」ことが大事
      </h2>

      <p class="lp-text">
        Google Mapは情報が多すぎる。<br>
        画像地図は更新できない。
      </p>

      <p class="lp-text">
        AreaMapは<br>
        <strong>行くために必要な情報だけ</strong>を残しました。
      </p>

      <ul class="lp-points">
        <li>目的地1点</li>
        <li>迷わない構図</li>
        <li>ワンタップでGoogle Map</li>
      </ul>
    </div>

  </section>

  <!-- =========================
    Section: Instagram
  ========================= -->
  <section class="lp-section lp-instagram" data-section="instagram">

    <div class="lp-bg lp-bg-instagram"></div>

    <div class="lp-content">
      <h2 class="lp-heading">
        Instagramでは<br>
        「保存される」より「行ける」
      </h2>

      <p class="lp-text">
        投稿は見られている。<br>
        でも、来店につながらない。
      </p>

      <p class="lp-text">
        プロフィールリンクから<br>
        そのままルート検索。
      </p>

      <p class="lp-emphasis">
        見た → 迷わない → 行ける
      </p>
    </div>

  </section>

  <!-- =========================
    Section: Flyer
  ========================= -->
  <section class="lp-section lp-flyer" data-section="flyer">

    <div class="lp-bg lp-bg-flyer"></div>

    <div class="lp-content">
      <h2 class="lp-heading">
        チラシでは<br>
        「後で調べる」を「今行く」に
      </h2>

      <p class="lp-text">
        QRを読み込む。<br>
        地図を見る。<br>
        そのままGoogle Mapへ。
      </p>

      <p class="lp-text">
        画像地図ではできなかった<br>
        <strong>行動までの1タップ</strong>
      </p>
    </div>

  </section>

  <!-- =========================
    Value Shift
  ========================= -->
  <section class="lp-section lp-value" data-section="value">

    <div class="lp-bg lp-bg-white"></div>

    <div class="lp-content lp-center">
      <p class="lp-quote">
        画像でも“反応”は取れます。<br>
        でもAreaMapは<br>
        <strong>“行動”が取れます。</strong>
      </p>

      <p class="lp-text">
        だから、<br>
        「どうすれば検索されて、<br>
        実際に来てもらえるか」を<br>
        一緒に考えられます。
      </p>
    </div>

  </section>

  <!-- =========================
    Data & Flow
  ========================= -->
  <section class="lp-section lp-data" data-section="data">

    <div class="lp-bg lp-bg-neutral"></div>

    <div class="lp-content">
      <h2 class="lp-heading">
        データは、難しくありません
      </h2>

      <div class="lp-flow">
        <div class="lp-flow-step">地図を見た？</div>
        <div class="lp-flow-arrow">↓</div>
        <div class="lp-flow-step">Google Mapを開いた？</div>
        <div class="lp-flow-arrow">↓</div>
        <div class="lp-flow-step">来店につながりそう？</div>
      </div>

      <p class="lp-text">
        見る数字は2つだけ。<br>
        次に何を直すかが分かります。
      </p>
    </div>

  </section>

  <!-- =========================
    Hearing CTA
  ========================= -->
  <section class="lp-section lp-hearing" data-section="hearing">

    <div class="lp-bg lp-bg-white"></div>

    <div class="lp-content lp-center">
      <h2 class="lp-heading">
        まずは今の状態を<br>
        一緒に整理しませんか？
      </h2>

      <p class="lp-text">
        YES / NOで答えるだけの<br>
        無料ヒアリングです。
      </p>
      <div class="hearing-wrapper">
        <h3>今の状況を整理しましょう</h3>
        <p>YES / NOで答えるだけです</p>
        <!-- =========================
          Question Area
        ========================= -->
        <div class="hearing-main">

          <div class="hearing-question" id="question-text">
            お店の場所は、初めての人でも迷わず分かると思いますか？
          </div>

          <div class="hearing-actions">
            <button class="btn-yes" data-answer="yes">YES</button>
            <button class="btn-no" data-answer="no">NO</button>
          </div>

          <div class="hearing-progress">
            <span id="current-step">1</span> / <span id="total-step">3</span>
          </div>
        </div>
      </div>
    </div>

  </section>

  <!-- =========================
    Footer
  ========================= -->
  <footer class="lp-footer">
    <small>© AreaMap</small>
  </footer>

</div>
  <script>
    document.addEventListener("DOMContentLoaded", () => {

      const sections = document.querySelectorAll(".lp-section");

      const observer = new IntersectionObserver(
        entries => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const sectionName = entry.target.dataset.section;
              document.body.setAttribute(
                "data-active-section",
                sectionName
              );
            }
          });
        },
        {
          root: null,
          rootMargin: "-40% 0px -40% 0px",
          threshold: 0
        }
      );

      sections.forEach(section => observer.observe(section));
    });
    const questions = [
      {
        id: "map_visibility",
        text: "お店の場所は、初めての人でも迷わず分かると思いますか？"
      },
      {
        id: "map_click",
        text: "ホームページやSNSから、地図は実際に押されていると思いますか？"
      },
      {
        id: "route_action",
        text: "地図を見た人は、そのまま来店行動に移れていると思いますか？"
      }
    ];

    let currentIndex = 0;
    const answers = {};

    const questionText = document.getElementById("question-text");
    const currentStep = document.getElementById("current-step");
    const totalStep = document.getElementById("total-step");

    totalStep.textContent = questions.length;

    document.querySelectorAll(".hearing-actions button").forEach(btn => {
      btn.addEventListener("click", () => {
        const answer = btn.dataset.answer;
        answers[questions[currentIndex].id] = answer;

        currentIndex++;

        if (currentIndex < questions.length) {
          updateQuestion();
        } else {
          goToResult();
        }
      });
    });

    function updateQuestion() {
      questionText.textContent = questions[currentIndex].text;
      currentStep.textContent = currentIndex + 1;
    }

    function goToResult() {
      // 結果を sessionStorage に保存
      sessionStorage.setItem("hearingResult", JSON.stringify(answers));

      // Before / After 画面へ
      window.location.href = "/before-after";
    }
    const result = JSON.parse(
      sessionStorage.getItem("hearingResult") || "{}"
    );

    const beforeText = document.getElementById("before-text");
    const afterText  = document.getElementById("after-text");
    const actionList = document.getElementById("action-list");

    /* =========================
      シナリオ定義
    ========================= */
    const scenarios = [
      {
        condition: r => r.map_visibility === "no",
        before: "初めて来る人にとって、場所が分かりにくい状態です。地図はあるものの、目印や構図が足りず、迷いやすくなっています。",
        after: "目的地1点に絞ったシンプルな地図で、初めての人でも迷わずたどり着ける状態になります。",
        actions: [
          "目的地を1点に絞る",
          "目印（交差点・建物）を追加",
          "構図を固定して迷いを減らす"
        ]
      },
      {
        condition: r => r.map_click === "no",
        before: "地図は置いてあるものの、あまり押されていません。場所の情報が目に入りづらい可能性があります。",
        after: "ホームページやSNSで、地図が自然に目に入り、押される状態になります。",
        actions: [
          "地図の配置を目立つ位置に変更",
          "『地図はこちら』の導線を明確に",
          "Instagramプロフィールから直接開けるようにする"
        ]
      },
      {
        condition: r => r.route_action === "no",
        before: "地図を見た人が、そのまま来店行動に移りづらい状態です。",
        after: "地図を見た流れで、そのままGoogle Mapを開き、行動に移れる状態になります。",
        actions: [
          "ワンタップでGoogle Mapを開けるようにする",
          "徒歩◯分・駐車場情報を強調",
          "『今行ける』訴求を追加"
        ]
      }
    ];

    /* =========================
      適用シナリオ抽出
    ========================= */
    const activeScenarios = scenarios.filter(s => s.condition(result));

    /* =========================
      表示生成
    ========================= */
    if (activeScenarios.length === 0) {
      beforeText.textContent =
        "現状、大きな問題は見当たりません。導線はうまく機能している可能性があります。";

      afterText.textContent =
        "今の導線を維持しつつ、細かい改善でさらに来店率を高めることができます。";

    } else {
      beforeText.textContent =
        activeScenarios.map(s => s.before).join(" ");

      afterText.textContent =
        activeScenarios.map(s => s.after).join(" ");

      activeScenarios.forEach(s => {
        s.actions.forEach(action => {
          const li = document.createElement("li");
          li.textContent = action;
          actionList.appendChild(li);
        });
      });
    }
  </script>
</body>
</html>
